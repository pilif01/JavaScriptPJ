<!DOCTYPE html>
<html>
    <head>
        <title>Rock paper scissors</title>
        <link rel="stylesheet" href="curs10rps-w-css.css">
    </head>
    <body>
    <p class = "title"> Rock paper scissors </p>

    <button onclick="
        playGame('rock')
    " class = "move-icon"><img src="rock-emoji.png">
    </button>

    <button onclick="
        playGame('paper')
        " class = "move-icon"><img src="paper-emoji.png">
    </button>

    <button onclick="
                playGame('scissors')
                " class = "move-icon">
        <img src="scissors-emoji.png">
    </button>

    <button onclick="
                    score.wins = 0;
                    score.losses = 0;
                    score.ties = 0;
                    localStorage.removeItem(score);
                ">
        Reset score
    </button>

    <p class = "js-result result"></p>
    <p class = "js-moves"></p>
    <p class = "js-score"></p>

    <script>
        score = JSON.parse(localStorage.getItem('score'))

        if (score === null){
            score = {
                wins: 0,
                losses: 0,
                ties: 0
            }
        }

        updateScore();

        function playGame(playerMove)
        {
            pickComputerMove()
            console.log(computerMove);
            if(playerMove === 'scissors'){
                if (computerMove === 'rock'){
                    result = 'lose';
                }

                else if (computerMove === 'paper'){
                    result = 'win';
                }

                else if (computerMove === 'scissors'){
                    result = 'tie';
                }
            } else if(playerMove === 'paper')
            {
                console.log(computerMove);

                if (computerMove === 'rock')
                {
                    result = 'win';
                }

                else if (computerMove === 'paper')
                {
                    result = 'tie';
                }

                else if (computerMove === 'scissors')
                {
                    result = 'lose';
                }
            } else if (playerMove === 'rock')
            {
                console.log(computerMove);

                if (computerMove === 'rock')
                {
                    result = 'tie';
                }

                else if (computerMove === 'paper')
                {
                    result = 'lose';
                }

                else if (computerMove === 'scissors')
                {
                    result = 'win';
                }
            }

            if (result === 'win'){
                score.wins++;
            }
            else if (result === 'lose'){
                score.losses++
            }
            else if (result === 'tie'){
                score.ties++;
            }

            localStorage.setItem('score', JSON.stringify(score));
            updateScore();
            document.querySelector('.js-result').innerHTML = result;
            document.querySelector('.js-moves').innerHTML = `you picked ${playerMove}, computer picked ${computerMove}`;
        }
        function updateScore(){
            document.querySelector('.js-score').innerHTML = `Wins: ${score.wins} Losses: ${score.losses} Ties: ${score.ties}`;
        }
        function pickComputerMove()
        {
            randomNumber = Math.random();
            if (randomNumber >=0 && randomNumber <1/3)
            {
                computerMove ='rock';
            }

            else if (randomNumber >=1/3 && randomNumber <2/3)
            {
                computerMove = 'paper';
            }

            else if (randomNumber >=2/3 && randomNumber <1)
            {
                computerMove = 'scissors';
            }

            return 5;
        }
        let randomNumber = Math.random();
        let computerMove = '';
        let result = '';
    </script>
    </body>
</html>